<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Graphing the Reddit Place Sensation with Neo4j - Bodong Chen</title>
    <meta property="og:title" content="Graphing the Reddit Place Sensation with Neo4j - Bodong Chen">
    

    
      
    

    

    
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="blog">
    <header class="masthead">
      <h1><a href="/">Bodong Chen</a></h1>

<p class="tagline">Crisscross Landscapes</p>

      <nav class="menu">
        <input id="menu-check" type="checkbox" />
        <label id="menu-label" for="menu-check" class="unselectable">
          <span class="icon close-icon">✕</span>
          <span class="icon open-icon">☰</span>
          <span class="text">Menu</span>
        </label>
        <ul>
        
        
        <li><a href="/">Home</a></li>
        
        <li><a href="/blog/">Blog</a></li>
        
        <li><a href="/cv/">Publications</a></li>
        
        <li><a href="/notes/">Open Scholar</a></li>
        
        <li><a href="/teaching/">Teaching</a></li>
        
        <li><a href="/%E5%8D%9A%E5%AE%A2/">博客</a></li>
        
        <li><a href="/index.xml">Subscribe</a></li>
        
        
        </ul>
      </nav>
    </header>

    <article class="main">
      <header class="title">
      
<h1>Graphing the Reddit Place Sensation with Neo4j</h1>

<h3>
  2017-04-10</h3>
<hr>


      </header>





<p>I&rsquo;ver never liked the April Fool&rsquo;s Day, until this year when <a href="https://www.reddit.com/">Reddit</a> decided to <a href="https://www.reddit.com/r/announcements/comments/62mesr/place/">launch a social experiment</a> called <a href="https://www.reddit.com/r/place/">Reddit Place</a>.</p>

<p>The idea is simple. The whole world &ndash; or all Reddit users &ndash; were given a 999 x 999 blank canvas to draw on. Some simple rules apply:</p>

<blockquote>
<p>Each user could choose one pixel from 16 colors to place anywhere on the canvas. They could place as many pixels of as many colors as they wanted, but they had to wait a few minutes between placing each one. (<a href="http://sudoscript.com/reddit-place/">source</a>)</p>
</blockquote>

<p>During the following 72 hours, amazingly interesting things happened on this 999 x 999 canvas. Below is a gif that gives you a glimpse into what had happened. Numerous accounts of this event have been posted. See <a href="http://sudoscript.com/reddit-place/">this post</a> for a good overview, and more posts can be found at the <a href="https://www.reddit.com/r/place">Reddit Place</a> itself.</p>

<p><img src="https://i.redd.it/5p68ukzkwdpy.gif" alt="" /></p>

<h2 id="graphing-the-reddit-place-with-neo4j">Graphing the Reddit Place with Neo4j</h2>

<p>The Reddit Place as a web-based social phenomenon will be remembered and studied by many people. I didn&rsquo;t follow this event at all but was amazed by the various types of participating users, sub-communities who self-organized to achieve certain goals, clashes and fights, evolving rules, impressive artworks, and so on &ndash; all that happened on this little canvas. I&rsquo;m especially intrigued by the emergent, self-organizing processes of constructing, destructing, negotiating, and re-constructing among numerous users and user networks supported by all kinds of communication tools (mostly Reddit itself).</p>

<p>With <a href="https://www.reddit.com/r/PlaceDevs/comments/637ynq/a_datadump_but_from_a_different_scraper/">a data dump</a> that captured the history of this event, I could not resist myself from playing with it using <a href="https://neo4j.com/">Neo4j</a>.</p>

<h3 id="importing-data">Importing data</h3>

<p>To begin with, I wrote the following Cypher scripts to import the csv dump into Neo4j:</p>

<p>{% highlight cypher %}
// Set constraints
CREATE CONSTRAINT ON (p:Point) ASSERT p.location IS UNIQUE;
CREATE INDEX ON :User(name);</p>

<p>// Insert data
USING PERIODIC COMMIT 1000
LOAD CSV FROM &ldquo;file:///export.csv&rdquo; AS l
WITH l, [toInt(l[1]), toInt(l[2])] AS loc
WHERE l[3] IS NOT NULL
MERGE (p:Point {location: loc})
  ON CREATE SET p.location = loc, p.count = 1
  ON MATCH SET p.count = p.count + 1
MERGE (u:User {name: l[3]})
  ON CREATE SET u.name = l[3], u.count = 1
  ON MATCH SET u.count = u.count + 1
MERGE (u)-[r:PAINT]-&gt;(p)
  ON CREATE SET r.count = 1, r.ids = [toInt(l[0])],
    r.colors = [toInt(l[4])], r.times = [toInt(l[5])]
  ON MATCH SET r.count = r.count + 1,
    r.ids = r.ids + toInt(l[0]),
    r.colors = r.colors + toInt(l[4]),
    r.times = r.times + toInt(l[5]);
{% endhighlight %}</p>

<p>The figure below demonstrates the <em>graph model</em> of the created Neo4j graph database. The model is quite simple and intuitive, including two node types named <code>User</code> and <code>Point</code> and one relationship type named <code>Paint</code>.</p>

<p><img src="/assets/article_images/r-place-graph-model.png" alt="" /></p>

<p>It took my computer ~22 minutes to create 1.6 million labels, 1.6 million nodes, 28.8 million properties, and 4.13 million relationships in this graph database, the size of which ended up to be 4.30 GB.</p>

<h3 id="general-queries">General queries</h3>

<p>After data were loaded, I did some quick queries.</p>

<p><strong>First, who were the most active users?</strong> User <code>itsnotlupus</code> won the game as s/he painted for 177 times. This may not sound much but if you multiple 177 by 5 minutes (the &lsquo;cooldown&rsquo; time), you will find the user spent roughly 15 hours painting or contemplating the next pixel on the canvas. This time amount does not include activities in other communication tools.</p>

<p><strong>Where did <code>itsnotlupus</code> paint?</strong> Below is a graph showing this user (in the center) and 100 pixels s/he painted on. Note that each pixel is identified by its coordinates in the 2D canvas.</p>

<p><img src="/assets/article_images/top-user.png" alt="" /></p>

<p>I noticed this user painted a whole lot near <code>Point [380, 880]</code>. By clicking on the [380, 881] Point node, see below, I could check who else have painted on that spot. 16 other users have painted there. Maybe there were some interesting collisions on that single pixel?</p>

<p><img src="/assets/article_images/top-user-clashes.png" alt="" /></p>

<p><strong>Which colors did <code>itsnotlupus</code> use?</strong> It appeared <code>itsnotlupus</code> painted <span style="background-color:#e59500">#E59500</span> for 104 times, and <span style="background-color:#e50000">#E50000</span> for 70 times. Do those two colors belong to specific clans <code>itsnotlupus</code> was affiliated with?</p>

<p>{% highlight cypher %}
MATCH (u:User {name: &ldquo;itsnotlupus&rdquo;})-[r:PAINT]-&gt;()
WITH collect(r.colors) as colors
UNWIND colors as array
UNWIND array as color
RETURN color, count(color) as count
ORDER BY count DESC LIMIT 10
{% endhighlight %}</p>

<h3 id="the-blue-corner">The Blue Corner</h3>

<p>Based on <a href="http://sudoscript.com/reddit-place/">this post</a>, the lower-right corner was occupied by <a href="https://www.reddit.com/r/BlueCorner/">Blue</a>. So I checked the corner pixel [999, 999]. The following Cypher query returned a total of <strong><code>10,121</code> user actions on that single pixel</strong>. The figure that follows shows 100 of those users who painted at [999, 999].</p>

<p>{% highlight cypher %}
MATCH (p:Point {location: [999, 999]})&lt;-[r:PAINT]-()
RETURN count&reg;
{% endhighlight %}</p>

<p><img src="/assets/article_images/999x999-users.png" alt="" /></p>

<p><strong>Top painters in that corner</strong> are listed in the figure below. Querying the top [999, 999] painter <code>MrMeltJr</code> I found him painting <span style="text-shadow: 4px 4px 2px #0000EA"><code>blue (#0000EA)</code></span> predominantly (105 out of 116 times). He was clearly a member of the Blue Corner sub-community.</p>

<p><img src="/assets/article_images/999x999-top-users.png" alt="" /></p>

<p><strong>What was the most used color in that corner?</strong> The following query found the most dominant color to be <span style="text-shadow: 4px 4px 2px #0000EA"><code>#0000EA</code></span>, which appeared for 7400 times, followed by <span style="text-shadow: 4px 4px 2px #820080"><code>#820080</code></span>&rsquo;s 2055 times. This finding could be confirmed by the gif above.</p>

<p>{% highlight cypher %}
MATCH (p:Point {location: [999, 999]})&lt;-[r:PAINT]-()
WITH collect(r.colors) as allColors
UNWIND allColors as array
UNWIND array as color
RETURN color, count(color) as count ORDER BY count DESC LIMIT 10
{% endhighlight %}</p>

<h2 id="more-fun-to-come">More Fun to Come</h2>

<p>These queries are far from even scratching the surface of the complex social phenomenon. Two aspects I&rsquo;m especially interested in exploring (if I have time) are the <code>temporal</code> aspect of user actions on single pixels and the <code>spacial</code> aspect of changes with neighboring pixels. In addition, it would also be useful if we could connect communication and coordination among users and communities external to the canvas.</p>

<p>Yes, now I see the April Fool&rsquo;s Day could be fun!</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/blog/2017-03-23-umn-lacop/">A biased introduction to Learning Analytics: Kicking-off #UMNLACoP</a></span>
  <span class="nav-next"><a href="/blog/2017-07-24-value-in-education/">Changing Value and Valuation in Education</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/blog\/2017-03-23-umn-lacop\/';
    
  } else if (e.which == 39) {  
    
    url = '\/blog\/2017-07-24-value-in-education\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script src="/js/disqusloader.min.js"></script>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//meefen.disqus.com/embed.js';
    
    if (location.hash.match(/^#comment/)) {
      var d = document, s = d.createElement('script');
      s.src = disqus_js; s.async = true;
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    } else {
      disqusLoader('#disqus_thread', {
        scriptUrl: disqus_js, laziness: 0, disqusConfig: disqus_config
      });
    }
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>







  

  
  <hr>
  <div class="copyright">&copy; <a href="http://meefen.github.io/">Bodong Chen</a> 2015-2018 | <a href="https://github.com/meefen">Github</a> | <a href="https://twitter.com/bod0ng">Twitter</a></div>
  
  </footer>
  </article>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-50108133-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

