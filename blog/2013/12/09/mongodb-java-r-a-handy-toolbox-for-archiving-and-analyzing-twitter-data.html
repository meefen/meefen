<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>MongoDB + Java + R = A handy toolbox for archiving and analyzing Twitter data</title>
  <meta name="description" content="I’ve been using Martin Hawksey’sbrilliant Google SpreadsheetTAGS forarchiving Twitter datafor y-e-a-r-s.It works very well, and allowed me to develop little R toyslike twitterytics-shiny tointeract..." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@bod0ng" />
    <meta name="twitter:title" content="MongoDB + Java + R = A handy toolbox for archiving and analyzing Twitter data" />
    <meta name="twitter:image" content="http://bodong.ch//assets/images/df_logo.png" />
    
    <meta name="twitter:description"  content="I’ve been using Martin Hawksey’sbrilliant Google SpreadsheetTAGS forarchiving Twitter datafor y-e-a-r-s.It works very well, and allowed me to develop little R toyslike twitterytics-shiny tointeract..." />
    
  

  <meta property="og:site_name" content="Crisscross Landscapes" />
  <meta property="og:title" content="MongoDB + Java + R = A handy toolbox for archiving and analyzing Twitter data"/>
  
  <meta property="og:description" content="I’ve been using Martin Hawksey’sbrilliant Google SpreadsheetTAGS forarchiving Twitter datafor y-e-a-r-s.It works very well, and allowed me to develop little R toyslike twitterytics-shiny tointeract..." />
  
  <meta property="og:image" content="http://bodong.ch//assets/images/df_logo.png" />
  <meta property="og:url" content="http://bodong.ch//blog/2013/12/09/mongodb-java-r-a-handy-toolbox-for-archiving-and-analyzing-twitter-data.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2013-12-09T00:00:00-06:00">

  <link rel="canonical" href="http://bodong.ch//blog/2013/12/09/mongodb-java-r-a-handy-toolbox-for-archiving-and-analyzing-twitter-data.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/css/custom.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://bodong.ch/" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/df_logo.png)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">MongoDB + Java + R = A handy toolbox for archiving and analyzing Twitter data</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2013-12-09T00:00:00-06:00">09 Dec 2013</time>
              
                <a class="tag_list_link" href="/tag/social media">social media</a>
              
                <a class="tag_list_link" href="/tag/mongodb">mongodb</a>
              
                <a class="tag_list_link" href="/tag/r">r</a>
              
                <a class="tag_list_link" href="/tag/twitter">twitter</a>
              
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>I’ve been using <a href="https://twitter.com/mhawksey">Martin Hawksey</a>’s
brilliant <a href="http://mashe.hawksey.info/2013/02/twitter-archive-tagsv5/">Google Spreadsheet
TAGS</a> for
archiving Twitter data
for <a href="http://bodongchen.com/blog/2012/04/overview-of-aera2012-tweets/">y</a>-<a href="http://bodongchen.com/blog/2012/10/225/">e</a>-<a href="http://bodongchen.com/blog/2013/02/demo-of-using-twitter-hashtag-analytics-package-to-analyze-tweets-from-lak13/">a</a>-<a href="http://bodongchen.com/blog/2013/12/top-links-from-the-mooc-research-conference-twitter-backchannel-mri13/">r</a>-s.
It works very well, and allowed me to develop little R toys
like <a href="https://github.com/dirkchen/twitterytics-shiny">twitterytics-shiny</a> to
interactively explore Twitter archives.</p>

<p>However, I have a few complains. First, Twitter API authentication needs
to be set up for each archive. The task which require a few steps in
Google Spreadsheet is not trivial. Second, I often ended up getting
hundreds or even thousands of duplicates that may cause the file size to
exceed Google Spreadsheet’s size limit. Third, sometimes the getTweets()
function powered by Google Code (I think) fails for unknown reasons.
Although I still greatly enjoy TAGS, for these reasons I have been
wishing to have an easier and more liable way to archive theoretically
unlimited number of tweets for quite a while. So when I read a post
about <em>archiving tweets with
MongoDB</em> (<a href="http://thinktostart.wordpress.com/2013/10/22/build-your-own-twitter-archive-and-analyzing-infrastructure-with-mongodb-java-and-r-part-1/">part1</a>
&amp;
<a href="http://thinktostart.wordpress.com/2013/12/09/build-your-own-twitter-archive-and-analyzing-infrastructure-with-mongodb-java-and-r-part-2/comment-page-1/#comment-448">part2</a>)
by <a href="https://twitter.com/julianhi">Julian Hillebrand</a> today, I couldn’t
stop myself from trying it out.</p>

<p><a href="http://bodongchen.com/blog/wp-content/uploads/2013/12/mongoDB-logo.png"><img src="http://bodongchen.com/blog/wp-content/uploads/2013/12/mongoDB-logo-1024x341.png" alt="mongoDB-logo" /></a></p>

<p>Julian’s <a href="https://github.com/JulianHill/TwitterArchive">code</a> works! But
after a bit playing and tweaking, I think the solution I ended up using
became quite distinctive and deserved an independent post. So below is
what I did, which I think contains some improvement over the original
solution.</p>

<ol>
  <li>
    <h2 id="setup-mongodb">Setup MongoDB</h2>
  </li>
</ol>

<p>You can download MongoDB <a href="http://www.mongodb.org/downloads">here</a> and
install it on your computer as Julian suggested. Or, you can using
MongoDB hosting services in the cloud, like
<a href="https://mongolab.com/">MongoLab</a>. I used the free subscription on
MongoLab. It was very easy to setup (believe me, this was my first time
partying with MongoDB), and you don’t need to install any other things
(like the Netbeans MongoDB plugin).  Plus, you might want to keep it
running when your laptop is off so it’s better to use something in the
cloud. So I strongly recommend MongoLab. If you choose to follow this
path, there’re around 3 steps:</p>

<ul>
  <li><strong>Register</strong> for a MongoLab free subscription</li>
  <li><strong>Create a new database</strong>, say “twitter-mongo”</li>
  <li>Click into the database and <strong>add a database user</strong>; record the
username/password for later use</li>
</ul>

<p>It will definitely help to read MongoDB’s
<a href="http://docs.mongodb.org/manual/tutorial/getting-started-with-the-mongo-shell/">manual</a>,
but I really got as far as the first page.</p>

<ol>
  <li>
    <h2 id="setup-java-project-and-run-the-code">Setup Java project and run the code</h2>
  </li>
</ol>

<p>Java code is used to retrieve tweets through Twitter API and save them
into MongoDB. Julian explained how his code works in details. I did some
tweaks to make the settings more visible and easier to modify. My code
is posted in this
<a href="https://gist.github.com/dirkchen/7885000">gist</a>. Download
TwitterLoop.java and do the following few things:</p>

<ul>
  <li><strong>Create a Java project</strong> in your favorite Java IDE (e.g., Netbeans)
and put the Java file in</li>
  <li><strong>Add dependencies</strong>:
<a href="http://twitter4j.org/en/index.html#download">twitter4j</a> (core) and
<a href="https://github.com/mongodb/mongo-java-driver/downloads">mongodb-java-driver</a></li>
  <li>In the Java file, <strong>change settings</strong> for MongoDB and Twitter API</li>
</ul>

<p>Then you should be able to directly run the Java file and start
collecting tweets. Each time when you run the file, you will need to
type in the search keyword (e.g. “#mri13”) for Twitter. Then the file
will repeatedly retrieve 100 tweets containing that keyword from Twitter
every 60 seconds (these two numbers can also be customized in the Java
file), and put new ones into MongoDB. Theoretically you can have Java
instances running forever. (As Julian mentioned, there should be a
better way to do this loop, for eaxmple using streaming API.)</p>

<p>If you run the Java file twice for two different Twitter archives, say
“#mri13” and “#edtechchat”, two MongoDB <em>collections</em> will be created
respectively with these two names.</p>

<ol>
  <li>
    <h2 id="retrieve-tweets-in-r-from-mongodb-for-analysis">Retrieve tweets in R from MongoDB for analysis</h2>
  </li>
</ol>

<p>After tweets are collected in MongoDB, querying data in R becomes very
straightforward.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">rmongodb</span><span class="p">)</span><span class="w">

</span><span class="c1">## Host info and credentials
</span><span class="n">host</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"ds053858.mongolab.com:53858"</span><span class="w">
</span><span class="n">username</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"your_username"</span><span class="w">
</span><span class="n">password</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"your_pass"</span><span class="w">
</span><span class="n">db</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"twitter-mongo"</span><span class="w">

</span><span class="c1">## Connect to mongodb
</span><span class="n">mongo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.create</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span><span class="w">
                      </span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span></code></pre></figure>

<p>Check how many collections are in the database:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## Get a list of collections within our namespace
#  here I used each collection for a twitter archive
</span><span class="n">mongo.get.database.collections</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">db</span><span class="p">)</span></code></pre></figure>

<p>Do some simple queries in the #mri13 collection:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## Create a string that points to the namespace
#  the collection I'm interested in is "#mri13"
</span><span class="n">collection</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"#mri13"</span><span class="w">
</span><span class="n">namespace</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">collection</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span><span class="w">

</span><span class="c1">## Check the total number of tweets in "#mri13"
</span><span class="n">mongo.count</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">namespace</span><span class="p">,</span><span class="w"> </span><span class="n">mongo.bson.empty</span><span class="p">())</span></code></pre></figure>

<p>Build a query to find how many tweets were posted by me</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">buf</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.bson.buffer.create</span><span class="p">()</span><span class="w">
</span><span class="n">mongo.bson.buffer.append</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bodongchen"</span><span class="p">)</span><span class="w">
</span><span class="n">query</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.bson.from.buffer</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span><span class="w">
</span><span class="c1"># get the count
</span><span class="n">count</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.count</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">namespace</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">)</span><span class="w">
</span><span class="n">count</span><span class="w">
</span><span class="err"> </span><span class="w">
</span><span class="c1">## Get all tweets posted by me
</span><span class="n">tweets</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="n">cursor</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.find</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">namespace</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">)</span><span class="w">
</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">mongo.cursor.next</span><span class="p">(</span><span class="n">cursor</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="err">  </span><span class="n">val</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.cursor.value</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span><span class="w">
</span><span class="err">  </span><span class="n">tweets</span><span class="p">[[</span><span class="nf">length</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span><span class="m">+1</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.bson.value</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="s2">"tweet_text"</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="nf">length</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span></code></pre></figure>

<p>Retrieve all tweets in this collection/archive as a dataframe:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## Retrieve all tweets and put into a dataframe
</span><span class="n">library</span><span class="p">(</span><span class="n">plyr</span><span class="p">)</span><span class="w">
</span><span class="n">df_arch1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="n">cursor</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mongo.find</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">namespace</span><span class="p">)</span><span class="w">
</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">mongo.cursor.next</span><span class="p">(</span><span class="n">cursor</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="c1"># iterate and grab the next record
</span><span class="w">  </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mongo.bson.to.list</span><span class="p">(</span><span class="n">mongo.cursor.value</span><span class="p">(</span><span class="n">cursor</span><span class="p">))</span><span class="w">
  </span><span class="c1"># make it a dataframe
</span><span class="w">  </span><span class="n">tmp.df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">tmp</span><span class="p">)),</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">
  </span><span class="c1"># bind to the master dataframe
</span><span class="w">  </span><span class="n">df_arch1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rbind.fill</span><span class="p">(</span><span class="n">df_arch1</span><span class="p">,</span><span class="w"> </span><span class="n">tmp.df</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">df_arch1</span><span class="p">)</span></code></pre></figure>

<p>Start playing with another collection/archive named “#edtechchat”:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">### Try with another collection
</span><span class="n">collection2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"#edtechchat"</span><span class="w">
</span><span class="n">namespace2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="w"> </span><span class="n">collection2</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">"."</span><span class="p">)</span><span class="w">
</span><span class="n">mongo.count</span><span class="p">(</span><span class="n">mongo</span><span class="p">,</span><span class="w"> </span><span class="n">namespace2</span><span class="p">,</span><span class="w"> </span><span class="n">mongo.bson.empty</span><span class="p">())</span></code></pre></figure>

<p>The R code above is also included in the
<a href="https://gist.github.com/dirkchen/7885000">gist</a>.</p>

<h2 id="conclusions">Conclusions</h2>

<p>This solution brought together by MongoDB, Java, and R seems to me a
proof-of-concept of a reliable and scalable way to automatically archive
and analyze tweets. Here, Java can be easily replaced by Python or R. It
might evolve into a nice toolbox for hacking Twitter data. I believe
there will be a lot of fun.</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=MongoDB+%2B+Java+%2B+R+%3D+A+handy+toolbox+for+archiving+and+analyzing+Twitter+data&amp;url=http://bodong.ch//blog/2013/12/09/mongodb-java-r-a-handy-toolbox-for-archiving-and-analyzing-twitter-data"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Bodong Chen</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2013-12-09 00:00">09 Dec 2013</time></p>
            </section>
          </div>
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="http://bodong.ch//">Bodong Chen</a> &copy; 2018<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'meefen'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/delicate-arch-night-stars-landscape.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Crisscross Landscapes</h1>
        <h2 class="blog-description">Bodong Chen, University of Minnesota
</h2>
        <a href="/" class="btn">Back to Home</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');

      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50108133-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
