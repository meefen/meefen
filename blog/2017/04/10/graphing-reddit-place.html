<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Graphing the Reddit Place Sensation with Neo4j</title>
  <meta name="description" content="I’ver never liked the April Fool’s Day, until this year when Reddit decided to launch a social experiment called Reddit Place." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@bod0ng" />
    <meta name="twitter:title" content="Graphing the Reddit Place Sensation with Neo4j" />
    <meta name="twitter:image" content="http://bodong.ch//assets/images/df_logo.png" />
    
    <meta name="twitter:description"  content="I’ver never liked the April Fool’s Day, until this year when Reddit decided to launch a social experiment called Reddit Place." />
    
  

  <meta property="og:site_name" content="Crisscross Landscapes" />
  <meta property="og:title" content="Graphing the Reddit Place Sensation with Neo4j"/>
  
  <meta property="og:description" content="I’ver never liked the April Fool’s Day, until this year when Reddit decided to launch a social experiment called Reddit Place." />
  
  <meta property="og:image" content="http://bodong.ch//assets/article_images/ajWiAYi.png" />
  <meta property="og:url" content="http://bodong.ch//blog/2017/04/10/graphing-reddit-place.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2017-04-10T00:00:00-05:00">

  <link rel="canonical" href="http://bodong.ch//blog/2017/04/10/graphing-reddit-place.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/css/custom.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://bodong.ch/" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/df_logo.png)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/article_images/ajWiAYi.png)">
            Article Image
          </div>
          <div class="post-image-image2" style="background-image: url()">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">Graphing the Reddit Place Sensation with Neo4j</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Bodong Chen</h4>
              on
              <time datetime="2017-04-10 00:00">10 Apr 2017</time>
              
                <a class="tag_list_link" href="/tag/graph database">graph database</a>
              
                <a class="tag_list_link" href="/tag/social media">social media</a>
              
                <a class="tag_list_link" href="/tag/neo4j">neo4j</a>
              
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>I’ver never liked the April Fool’s Day, until this year when <a href="https://www.reddit.com/">Reddit</a> decided to <a href="https://www.reddit.com/r/announcements/comments/62mesr/place/">launch a social experiment</a> called <a href="https://www.reddit.com/r/place/">Reddit Place</a>.</p>

<p>The idea is simple. The whole world – or all Reddit users – were given a 999 x 999 blank canvas to draw on. Some simple rules apply:</p>

<blockquote>
  <p>Each user could choose one pixel from 16 colors to place anywhere on the canvas. They could place as many pixels of as many colors as they wanted, but they had to wait a few minutes between placing each one. (<a href="http://sudoscript.com/reddit-place/">source</a>)</p>
</blockquote>

<p>During the following 72 hours, amazingly interesting things happened on this 999 x 999 canvas. Below is a gif that gives you a glimpse into what had happened. Numerous accounts of this event have been posted. See <a href="http://sudoscript.com/reddit-place/">this post</a> for a good overview, and more posts can be found at the <a href="https://www.reddit.com/r/place">Reddit Place</a> itself.</p>

<p><img src="https://i.redd.it/5p68ukzkwdpy.gif" alt="" /></p>

<h2 id="graphing-the-reddit-place-with-neo4j">Graphing the Reddit Place with Neo4j</h2>

<p>The Reddit Place as a web-based social phenomenon will be remembered and studied by many people. I didn’t follow this event at all but was amazed by the various types of participating users, sub-communities who self-organized to achieve certain goals, clashes and fights, evolving rules, impressive artworks, and so on – all that happened on this little canvas. I’m especially intrigued by the emergent, self-organizing processes of constructing, destructing, negotiating, and re-constructing among numerous users and user networks supported by all kinds of communication tools (mostly Reddit itself).</p>

<p>With <a href="https://www.reddit.com/r/PlaceDevs/comments/637ynq/a_datadump_but_from_a_different_scraper/">a data dump</a> that captured the history of this event, I could not resist myself from playing with it using <a href="https://neo4j.com/">Neo4j</a>.</p>

<h3 id="importing-data">Importing data</h3>

<p>To begin with, I wrote the following Cypher scripts to import the csv dump into Neo4j:</p>

<figure class="highlight"><pre><code class="language-cypher" data-lang="cypher">// Set constraints
CREATE CONSTRAINT ON (p:Point) ASSERT p.location IS UNIQUE;
CREATE INDEX ON :User(name);

// Insert data
USING PERIODIC COMMIT 1000
LOAD CSV FROM "file:///export.csv" AS l
WITH l, [toInt(l[1]), toInt(l[2])] AS loc
WHERE l[3] IS NOT NULL
MERGE (p:Point {location: loc})
  ON CREATE SET p.location = loc, p.count = 1
  ON MATCH SET p.count = p.count + 1
MERGE (u:User {name: l[3]})
  ON CREATE SET u.name = l[3], u.count = 1
  ON MATCH SET u.count = u.count + 1
MERGE (u)-[r:PAINT]-&gt;(p)
  ON CREATE SET r.count = 1, r.ids = [toInt(l[0])],
    r.colors = [toInt(l[4])], r.times = [toInt(l[5])]
  ON MATCH SET r.count = r.count + 1,
    r.ids = r.ids + toInt(l[0]),
    r.colors = r.colors + toInt(l[4]),
    r.times = r.times + toInt(l[5]);</code></pre></figure>

<p>The figure below demonstrates the <em>graph model</em> of the created Neo4j graph database. The model is quite simple and intuitive, including two node types named <code class="highlighter-rouge">User</code> and <code class="highlighter-rouge">Point</code> and one relationship type named <code class="highlighter-rouge">Paint</code>.</p>

<p><img src="/assets/article_images/r-place-graph-model.png" alt="" /></p>

<p>It took my computer ~22 minutes to create 1.6 million labels, 1.6 million nodes, 28.8 million properties, and 4.13 million relationships in this graph database, the size of which ended up to be 4.30 GB.</p>

<h3 id="general-queries">General queries</h3>

<p>After data were loaded, I did some quick queries.</p>

<p><strong>First, who were the most active users?</strong> User <code class="highlighter-rouge">itsnotlupus</code> won the game as s/he painted for 177 times. This may not sound much but if you multiple 177 by 5 minutes (the ‘cooldown’ time), you will find the user spent roughly 15 hours painting or contemplating the next pixel on the canvas. This time amount does not include activities in other communication tools.</p>

<p><strong>Where did <code class="highlighter-rouge">itsnotlupus</code> paint?</strong> Below is a graph showing this user (in the center) and 100 pixels s/he painted on. Note that each pixel is identified by its coordinates in the 2D canvas.</p>

<p><img src="/assets/article_images/top-user.png" alt="" /></p>

<p>I noticed this user painted a whole lot near <code class="highlighter-rouge">Point [380, 880]</code>. By clicking on the [380, 881] Point node, see below, I could check who else have painted on that spot. 16 other users have painted there. Maybe there were some interesting collisions on that single pixel?</p>

<p><img src="/assets/article_images/top-user-clashes.png" alt="" /></p>

<p><strong>Which colors did <code class="highlighter-rouge">itsnotlupus</code> use?</strong> It appeared <code class="highlighter-rouge">itsnotlupus</code> painted <span style="background-color:#e59500">#E59500</span> for 104 times, and <span style="background-color:#e50000">#E50000</span> for 70 times. Do those two colors belong to specific clans <code class="highlighter-rouge">itsnotlupus</code> was affiliated with?</p>

<figure class="highlight"><pre><code class="language-cypher" data-lang="cypher">MATCH (u:User {name: "itsnotlupus"})-[r:PAINT]-&gt;()
WITH collect(r.colors) as colors
UNWIND colors as array
UNWIND array as color
RETURN color, count(color) as count
ORDER BY count DESC LIMIT 10</code></pre></figure>

<h3 id="the-blue-corner">The Blue Corner</h3>

<p>Based on <a href="http://sudoscript.com/reddit-place/">this post</a>, the lower-right corner was occupied by <a href="https://www.reddit.com/r/BlueCorner/">Blue</a>. So I checked the corner pixel [999, 999]. The following Cypher query returned a total of <strong><code class="highlighter-rouge">10,121</code> user actions on that single pixel</strong>. The figure that follows shows 100 of those users who painted at [999, 999].</p>

<figure class="highlight"><pre><code class="language-cypher" data-lang="cypher">MATCH (p:Point {location: [999, 999]})&lt;-[r:PAINT]-()
RETURN count(r)</code></pre></figure>

<p><img src="/assets/article_images/999x999-users.png" alt="" /></p>

<p><strong>Top painters in that corner</strong> are listed in the figure below. Querying the top [999, 999] painter <code class="highlighter-rouge">MrMeltJr</code> I found him painting <span style="text-shadow: 4px 4px 2px #0000EA"><code class="highlighter-rouge">blue (#0000EA)</code></span> predominantly (105 out of 116 times). He was clearly a member of the Blue Corner sub-community.</p>

<p><img src="/assets/article_images/999x999-top-users.png" alt="" /></p>

<p><strong>What was the most used color in that corner?</strong> The following query found the most dominant color to be <span style="text-shadow: 4px 4px 2px #0000EA"><code class="highlighter-rouge">#0000EA</code></span>, which appeared for 7400 times, followed by <span style="text-shadow: 4px 4px 2px #820080"><code class="highlighter-rouge">#820080</code></span>’s 2055 times. This finding could be confirmed by the gif above.</p>

<figure class="highlight"><pre><code class="language-cypher" data-lang="cypher">MATCH (p:Point {location: [999, 999]})&lt;-[r:PAINT]-()
WITH collect(r.colors) as allColors
UNWIND allColors as array
UNWIND array as color
RETURN color, count(color) as count ORDER BY count DESC LIMIT 10</code></pre></figure>

<h2 id="more-fun-to-come">More Fun to Come</h2>

<p>These queries are far from even scratching the surface of the complex social phenomenon. Two aspects I’m especially interested in exploring (if I have time) are the <code class="highlighter-rouge">temporal</code> aspect of user actions on single pixels and the <code class="highlighter-rouge">spacial</code> aspect of changes with neighboring pixels. In addition, it would also be useful if we could connect communication and coordination among users and communities external to the canvas.</p>

<p>Yes, now I see the April Fool’s Day could be fun!</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Graphing+the+Reddit+Place+Sensation+with+Neo4j&amp;url=http://bodong.ch//blog/2017/04/10/graphing-reddit-place"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Bodong Chen</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2017-04-10 00:00">10 Apr 2017</time></p>
            </section>
          </div>
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="http://bodong.ch//">Bodong Chen</a> &copy; 2018<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'meefen'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/delicate-arch-night-stars-landscape.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Crisscross Landscapes</h1>
        <h2 class="blog-description">Bodong Chen, University of Minnesota
</h2>
        <a href="/" class="btn">Back to Home</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');

      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50108133-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
