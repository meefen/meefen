<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Knowledge Forum API: A demo</title>
  <meta name="description" content="Knowledge Forum (KF) has been recognized as the founding software in the computer-supported collaborative learning (CSCL) community. And it was also one of the earliest to offer embedded analytic t..." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@bod0ng" />
    <meta name="twitter:title" content="Knowledge Forum API: A demo" />
    <meta name="twitter:image" content="http://bodong.ch//assets/images/df_logo.png" />
    
    <meta name="twitter:description"  content="Knowledge Forum (KF) has been recognized as the founding software in the computer-supported collaborative learning (CSCL) community. And it was also one of the earliest to offer embedded analytic t..." />
    
  

  <meta property="og:site_name" content="Crisscross Landscapes" />
  <meta property="og:title" content="Knowledge Forum API: A demo"/>
  
  <meta property="og:description" content="Knowledge Forum (KF) has been recognized as the founding software in the computer-supported collaborative learning (CSCL) community. And it was also one of the earliest to offer embedded analytic t..." />
  
  <meta property="og:image" content="http://bodong.ch//assets/images/df_logo.png" />
  <meta property="og:url" content="http://bodong.ch//blog/2014/06/06/knowledge-forum-API.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2014-06-06T00:00:00-05:00">

  <link rel="canonical" href="http://bodong.ch//blog/2014/06/06/knowledge-forum-API.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="/css/custom.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://bodong.ch/" class="logo-readium"><span class="logo" style="background-image: url(/assets/images/df_logo.png)"></span></a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Knowledge Forum API: A demo</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2014-06-06T00:00:00-05:00">06 Jun 2014</time>
              
                <a class="tag_list_link" href="/tag/analytics">analytics</a>
              
                <a class="tag_list_link" href="/tag/knowledge building">knowledge building</a>
              
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p><a href="http://en.wikipedia.org/wiki/Knowledge_Forum">Knowledge Forum (KF)</a> has been recognized as the founding software in the computer-supported collaborative learning (CSCL) community. And it was also one of the earliest to offer embedded analytic tools for formative assessment. Thanks to contributions from a broad international community, a number of analytic tools have been developed for KF, including a suite of embedded applets (e.g., Contributions, Social Networks, Semantic Overlap, Vocabulary Growth, and Lexical Analysis; see <a href="http://dl.acm.org/citation.cfm?id=1599732">Teplovs et al., 2007</a>), a standalone Analytic Toolkit (ATK, Burtis, 1998), and more recently, a few independent analytic tools such as <a href="http://tccl.rit.albany.edu/wpsite/?page_id=265">Idea Thread Mapper</a> and <a href="http://kbdex.org/">Knowledge Building Discourse Explorer</a>. Underlying these development projects is a fundamental emphasis of <a href="http://ikit.org/kbi/knowledge-building">knowledge building</a>—the theory and pedagogy behind Knowledge Forum—on “embedded, concurrent, transformative assessment” for continual idea improvement. Thus, both the spirits and practice of learning analytics are present within the established line of knowledge building research.</p>

<p>Despite such a strong presence of learning analytics, I have a few complains about the way those analytic tools have been developed. First, developing an embedded analytic applet for the old KF is not a trivial task. Because an applet (written in Java Swing) uses the same communication mechanism as the core KF client, writing it requires a certain level of familiarity with the core KF codebase. This situation makes prototyping new tools especially difficult. Second, the condition for developing those independent analytic tools such as Idea Thread Mapper is not ideal either. Such work requires similar familiarity with KF development stack, and thus demands direct support from the core engineering team. Moreover, because teams in our distributed international community tend to favor a variety of different development stacks (relation vs. non-relation databases, for instance), plenty of redundant efforts have been made to retrieve KF data. We definitely need a more agile and standard way to make KF data accessible.</p>

<p>So when developing the next-generation Knowledge Forum, I have been advocating for <strong>an open Knowledge Forum API</strong>. Thanks to our engineer team’s hard work, such an API is finally taking shape. It is currently being used to develop an iPad version of KF. Because of my interests in learning analytics, I am especially interested in building a new technological framework for KF analytics. In this post, I am going to demo the API in <a href="http://www.r-project.org/">R</a>, a statistical programming language widely used by data scientists, to demonstrate how analytics could be compiled using the new API.</p>

<p><em>Note: The API is in its preliminary stage. So any suggestion will be appreciated.</em></p>

<h2 id="setup">Setup</h2>

<p>I’ve written <a href="https://github.com/meefen/KF-R">an R wrapper for the KF API</a> to make it easier to work with the API in R. This library currently depends on two R packages: <code class="highlighter-rouge">RCurl</code>—to make HTTP calls to the API, and <code class="highlighter-rouge">jsonlite</code>—to parse JSON objects returned by the API.</p>

<p>After loading the API library functions, you would need to create a ‘curl handle’ that will be shared by all API calls.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">source</span><span class="p">(</span><span class="s2">"kf-api-lib.R"</span><span class="p">)</span><span class="w"> </span><span class="c1"># load the function library
</span><span class="w">
</span><span class="c1">## Create a curl handle that will be shared among API calls
</span><span class="n">curl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateCurlHandle</span><span class="p">()</span></code></pre></figure>

<h2 id="user-authentication">User authentication</h2>

<p>After the server and login information is configured, user authentication can be done with one line of code. The results of authentication contain information about which sections (or knowledge-building communities) I’m currently registered in.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## Login info
</span><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://kf.utoronto.ca:8080/kforum/"</span><span class="w">
</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bodong"</span><span class="w"> </span><span class="c1"># YOUR_USERNAME
</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"******"</span><span class="w"> </span><span class="c1"># YOUR_PASSWORD
</span><span class="w">
</span><span class="n">regs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Authenticate</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w"> </span><span class="n">curl</span><span class="p">)</span><span class="w">
</span><span class="n">regs</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"sectionId"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sectionTitle"</span><span class="p">)]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">sections</span><span class="w"> </span><span class="n">I</span><span class="err">'</span><span class="n">m</span><span class="w"> </span><span class="k">in</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>##                              sectionId              sectionTitle
## 1 416658e6-b49f-4189-8f9a-fe78d8b5f4c1            KF Stress Test
## 2 b1f6fed2-a64e-4bd2-ab8b-393fb2ed1f06 Knowledge Society Network
</code></pre>
</div>

<h2 id="retrieve-my-posts-in-a-community">Retrieve my posts in a community</h2>

<p>After being authenticated, I can now access data in communities I’m a member of. Let’s first take a look at how posts (or notes) can be retrieved.</p>

<p>With the library, I could get all posts in a specific community and only keep mine.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">## Choose a section/community I'm interested in
</span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regs</span><span class="o">$</span><span class="n">authorInfo.guid</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="n">sectionId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regs</span><span class="o">$</span><span class="n">sectionId</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">

</span><span class="c1">## 2. My posts
</span><span class="n">posts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetSectionPosts</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">sectionId</span><span class="p">,</span><span class="w"> </span><span class="n">curl</span><span class="p">)</span><span class="w">
</span><span class="n">myPosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FilterPostsByAuthors</span><span class="p">(</span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="n">userId</span><span class="p">)</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">my</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="n">here</span></code></pre></figure>

<p>Then we can do all kinds of things with the results. For example, we can compare the number of my posts with the community average.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">do.call</span><span class="p">(</span><span class="s2">"rbind"</span><span class="p">,</span><span class="w"> </span><span class="n">posts</span><span class="o">$</span><span class="n">authors</span><span class="p">)</span><span class="w"> </span><span class="c1"># all unique authors
</span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"Me"</span><span class="p">,</span><span class="s2">"Average"</span><span class="p">),</span><span class="w"> </span><span class="n">levels</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"Me"</span><span class="p">,</span><span class="s2">"Average"</span><span class="p">)),</span><span class="w"> </span><span class="n">notes</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">myPosts</span><span class="p">),</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span><span class="o">/</span><span class="nf">length</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">authors</span><span class="o">$</span><span class="n">guid</span><span class="p">))))</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggthemes</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">author</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">notes</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="n">author</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Number of my posts compared to community average"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">guides</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_solarized</span><span class="p">()</span></code></pre></figure>

<p><img src="/assets/kf-api-compare-with-average.png" alt="" /></p>

<p>We could also create a calendar to visualize my posting activities.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strptime</span><span class="p">(</span><span class="n">myPosts</span><span class="o">$</span><span class="n">created</span><span class="p">,</span><span class="w"> </span><span class="s2">"%b %d, %Y %I:%M:%S %p"</span><span class="p">)</span><span class="w">
</span><span class="n">dates_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.character</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="o">=</span><span class="s2">"%Y-%m-%d"</span><span class="p">))</span><span class="w">
</span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">dates_str</span><span class="p">))</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"date"</span><span class="p">,</span><span class="w"> </span><span class="s2">"value"</span><span class="p">)</span><span class="w">
</span><span class="n">CalendarHeatmap</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="s2">"Posting Activities"</span><span class="p">)</span></code></pre></figure>

<p><img src="/assets/kf-api-posting-calendar.png" alt="" /></p>

<p>Obviously I have been not super active in this community.</p>

<p>We can also find out the top terms in my posts.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span><span class="w">
</span><span class="n">myNotes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Corpus</span><span class="p">(</span><span class="n">VectorSource</span><span class="p">(</span><span class="n">myPosts</span><span class="o">$</span><span class="n">body</span><span class="p">))</span><span class="w">
</span><span class="n">myDtm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">DocumentTermMatrix</span><span class="p">(</span><span class="n">myNotes</span><span class="p">,</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minWordLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
  </span><span class="n">removeNumbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">removePunctuation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w">
</span><span class="n">myFreqTerms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findFreqTerms</span><span class="p">(</span><span class="n">myDtm</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="n">myFreq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colSums</span><span class="p">(</span><span class="n">inspect</span><span class="p">(</span><span class="n">myDtm</span><span class="p">[,</span><span class="w"> </span><span class="n">myFreqTerms</span><span class="p">]))</span><span class="w">
</span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sort</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span><span class="w"> </span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">data.frame</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="nf">names</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span><span class="w"> </span><span class="n">freq</span><span class="o">=</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="o">=</span><span class="kc">NULL</span><span class="p">)</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>        term freq
1  knowledge   24
2   building   21
3       will   17
4  analytics   14
5       note   14
6       view   13
7     badges   11
8       open   10
9     design    8
10      need    8
</code></pre>
</div>

<p>As you can tell, I posted mostly about <em>knowledge building</em>, <em>analytics</em>, <em>open badges</em>, and <em>design</em>.</p>

<h2 id="inspect-a-specific-view">Inspect a specific view</h2>

<p>In Knowledge Forum, a <em>view</em> is a 2D space where <em>notes</em> (or posts) are organized. It is one of the most important feature that distinguishes KF from threaded discussion tools.</p>

<p>With the API, I could retrieve all views in the current community:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">views</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetSectionViews</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">sectionId</span><span class="p">,</span><span class="w"> </span><span class="n">curl</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>Then, I can further inspect one specific view.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">viewId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">views</span><span class="p">[</span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="s2">"guid"</span><span class="p">]</span><span class="w"> </span><span class="c1"># I'm interested in view #15
</span><span class="n">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetView</span><span class="p">(</span><span class="n">host</span><span class="p">,</span><span class="w"> </span><span class="n">viewId</span><span class="p">,</span><span class="w"> </span><span class="n">curl</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>With more detailed information about this view, we can count number of its posts and calculate the percentage of <em>build-ons</em> among those posts.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">nrow</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">viewPostRefs</span><span class="p">)</span><span class="w">
</span><span class="n">nrow</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">buildOns</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">viewPostRefs</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>We could also re-visualize the view, given the location of each note is also stored in the JSON object returned by the API.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">viewPostRefs</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location</span><span class="o">$</span><span class="n">point</span><span class="o">$</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">location</span><span class="o">$</span><span class="n">point</span><span class="o">$</span><span class="n">y</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">postInfo</span><span class="o">$</span><span class="n">title</span><span class="p">),</span><span class="w"> </span><span class="n">hjust</span><span class="o">=</span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">title</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_reverse</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.title</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">axis.text</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">axis.ticks</span><span class="o">=</span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">panel.grid</span><span class="o">=</span><span class="n">element_blank</span><span class="p">())</span><span class="w">
</span></code></pre>
</div>

<p><img src="/assets/kf-api-revisualize-view.png" alt="" /></p>

<p>Similar to what’s done for my personal notes, we can also find top terms used by posts within this view.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Corpus</span><span class="p">(</span><span class="n">VectorSource</span><span class="p">(</span><span class="n">view</span><span class="o">$</span><span class="n">viewPostRefs</span><span class="o">$</span><span class="n">postInfo</span><span class="o">$</span><span class="n">body</span><span class="p">))</span><span class="w">
</span><span class="n">dtm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">DocumentTermMatrix</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">minWordLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
  </span><span class="n">removeNumbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">removePunctuation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w">
</span><span class="n">freqTerms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findFreqTerms</span><span class="p">(</span><span class="n">dtm</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="n">freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colSums</span><span class="p">(</span><span class="n">inspect</span><span class="p">(</span><span class="n">dtm</span><span class="p">[,</span><span class="w"> </span><span class="n">freqTerms</span><span class="p">]))</span><span class="w">

</span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sort</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span><span class="w"> </span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">data.frame</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="nf">names</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span><span class="w"> </span><span class="n">freq</span><span class="o">=</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="o">=</span><span class="kc">NULL</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>        term freq
1       note   45
2       view   33
3      notes   22
4        can   17
5        new   13
6       will   13
7        tap   12
8       work   12
9        add   10
10    chrome   10
11    issues   10
12   version   10
13     ideas    9
14       one    9
15     views    9
16  attached    8
17     build    8
18    design    8
19      idea    8
20       ios    8
21      need    8
22 scaffolds    8
23      text    8
24     title    8
25       use    8
</code></pre>
</div>

<p>And then, I can further find out the overlap between the community’s and my own top terms.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">intersect</span><span class="p">(</span><span class="n">myFreqTerms</span><span class="p">,</span><span class="w"> </span><span class="n">freqTerms</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] "design" "need"   "note"   "view"   "will"
</code></pre>
</div>

<h2 id="future-work">Future work</h2>

<p>As a researcher interested in learning analytic tools, I am personally very excited about this API. As shown in this demo, it makes prototyping in R extremely easy. Using <code class="highlighter-rouge">rApache</code> or <code class="highlighter-rouge">Shiny</code>, we could further turn prototypes into analytic tools that can be seamlessly integrated within the new KF. Of course, you could choose to access the API in other languages such as Python and Java as well.</p>

<p>However, the API is still in its preliminary stage. More work needs to be done to make user clicklog accessible. Meanwhile, it should also support posting data backwards to KF.</p>

<p>In this year’s <a href="http://ikit.org/summerinstitute2014/">Knowledge Building Summer Institute</a> in Quebec City, I will be leading a knowledge building analytics workshop to further discuss the design of this API. Other broader issues related to epistemological, ethical, and technological aspects of knowledge building analytics will also be explored. Stay tuned.</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Knowledge+Forum+API%3A+A+demo&amp;url=http://bodong.ch//blog/2014/06/06/knowledge-forum-API"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/author.jpg)">Blog Logo</div>
              <h4>Bodong Chen</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2014-06-06 00:00">06 Jun 2014</time></p>
            </section>
          </div>
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="http://bodong.ch//">Bodong Chen</a> &copy; 2018<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'meefen'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/delicate-arch-night-stars-landscape.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Crisscross Landscapes</h1>
        <h2 class="blog-description">Bodong Chen, University of Minnesota
</h2>
        <a href="/" class="btn">Back to Home</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');

      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50108133-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
